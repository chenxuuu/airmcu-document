import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as p,o as c,c as i,a as n,b as s,d as o,w as l,e as a}from"./app-L4q_l0Kg.js";const u="/assets/QQ20230815132327-ZU5B6Dro.png",r="/assets/20230824132754-MtQoua6T.png",d={},k=a('<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介" aria-hidden="true">#</a> 简介</h2><p>本章介绍使用Air001开发板驱动 BMP180。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>BMP180 使用I²C通信接口，是专为测量大气压力而设计的基本传感器， BMP180可以测量300至1100 hPa（海拔9000m至-500m）的大气压，以及-40°C至85°C的温度。</p></div><h2 id="硬件准备" tabindex="-1"><a class="header-anchor" href="#硬件准备" aria-hidden="true">#</a> 硬件准备</h2>',4),m=n("code",null,"Air001",-1),v=n("code",null,"DAPLink调试器",-1),b=n("li",null,[n("p",null,[s("将"),n("code",null,"BMP180"),s("模块与"),n("code",null,"Air001开发板"),s("，按如下表格进行相连：")])],-1),h=a('<table><thead><tr><th style="text-align:center;">BMP180</th><th style="text-align:center;">Air001</th></tr></thead><tbody><tr><td style="text-align:center;">GND</td><td style="text-align:center;">GND</td></tr><tr><td style="text-align:center;">VCC</td><td style="text-align:center;">3.3V</td></tr><tr><td style="text-align:center;">SCL</td><td style="text-align:center;">PF_1</td></tr><tr><td style="text-align:center;">SDA</td><td style="text-align:center;">PF_0</td></tr></tbody></table><h2 id="软件部分" tabindex="-1"><a class="header-anchor" href="#软件部分" aria-hidden="true">#</a> 软件部分</h2><p>首先，安装<code>Adafruit BMP085 Library</code>库。</p><details class="hint-container details"><summary>打开Arduino管理库，进行安装</summary><p>可以打开Arduino管理库，找到<code>Adafruit BMP085 Library</code>库，并选择<code>全部安装</code>以安装所需依赖。</p><figure><img src="'+u+`" alt="库管理器中的 Adafruit BMP085 Library" tabindex="0" loading="lazy"><figcaption>库管理器中的 Adafruit BMP085 Library</figcaption></figure></details><p>开头引用<code>Adafruit_BMP085</code>包，并实例化对象<code>bmp</code>，后续仅需调用<code>bmp</code>对象即可使用BMP180。</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Adafruit_BMP085.h&gt;</span></span>
Adafruit_BMP085 bmp<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>setup()</code>函数中初始化串口与BMP180：</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">9600</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//初始化串口，波特率9600</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>bmp<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//初始化设备</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;initial failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>loop()</code>函数中添加如下代码：</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;温度&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>bmp<span class="token punctuation">.</span><span class="token function">readTemperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;℃&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;气压&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>bmp<span class="token punctuation">.</span><span class="token function">readPressure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Pa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 粗略计算海拔高度</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;海拔&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>bmp<span class="token punctuation">.</span><span class="token function">readAltitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;米&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>使用<code>bmp.readTemperature</code>方法，获取当前温度。</li><li>使用<code>bmp.readPressure</code>方法，获取当前气压。</li><li>使用<code>bmp.readAltitude()</code>方法，粗略计算当前的海拔高度。</li></ul><h2 id="输出结果" tabindex="-1"><a class="header-anchor" href="#输出结果" aria-hidden="true">#</a> 输出结果</h2><p>在串口监视器中将波特率调至9600，可观察到当前的信息，如下图：</p><figure><img src="`+r+'" alt="uart" tabindex="0" loading="lazy"><figcaption>uart</figcaption></figure>',14);function f(g,_){const t=p("RouterLink");return c(),i("div",null,[k,n("ul",null,[n("li",null,[n("p",null,[s("按"),o(t,{to:"/tutorial-advanced/Air001_start.html"},{default:l(()=>[s("☁️ Air001开发板入门")]),_:1}),s("，将"),m,s("和"),v,s("使用排针排母连接。")])]),b]),h])}const P=e(d,[["render",f],["__file","bmp180.html.vue"]]);export{P as default};
