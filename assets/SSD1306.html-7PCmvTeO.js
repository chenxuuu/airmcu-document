import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as e,o as p,c,a as n,b as s,d as o,w as i,e as l}from"./app-L4q_l0Kg.js";const d="/assets/QQ20230809162752-7zS-qsUp.png",u="/assets/ssd1306-W4o2IVj4.jpg",r={},k=n("h2",{id:"简介",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#简介","aria-hidden":"true"},"#"),s(" 简介")],-1),v=n("p",null,"本章介绍使用 Air001 开发板在 Arduino 平台上点亮SSD1306屏幕的使用方法。",-1),m=n("h2",{id:"硬件准备",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#硬件准备","aria-hidden":"true"},"#"),s(" 硬件准备")],-1),h=n("p",null,"Air001开发板一块、I²C接口的OLED屏幕（SSD1306驱动）一块。",-1),b=l('<p>将<code>OLED屏幕</code>模块与<code>Air001开发板</code>，按如下表格进行相连：</p><table><thead><tr><th style="text-align:center;">SSD1306</th><th style="text-align:center;">air001</th></tr></thead><tbody><tr><td style="text-align:center;">GND</td><td style="text-align:center;">GND</td></tr><tr><td style="text-align:center;">VCC</td><td style="text-align:center;">3.3V</td></tr><tr><td style="text-align:center;">D0(SCL)</td><td style="text-align:center;">PF01</td></tr><tr><td style="text-align:center;">D1(SDA)</td><td style="text-align:center;">PF00</td></tr><tr><td style="text-align:center;">RES</td><td style="text-align:center;">空</td></tr><tr><td style="text-align:center;">DC</td><td style="text-align:center;">VCC/GND</td></tr><tr><td style="text-align:center;">CS</td><td style="text-align:center;">GND</td></tr></tbody></table><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>DC</code>连接可以决定I²C从机地址：</p><ul><li><code>DC</code>连接<code>VCC</code>则I²C从机地址为<code>0x3d</code></li><li><code>DC</code>连接<code>GND</code>则I²C从机地址为<code>0x3c</code></li></ul></div><h2 id="软件部分" tabindex="-1"><a class="header-anchor" href="#软件部分" aria-hidden="true">#</a> 软件部分</h2><p>首先，安装<code>Adafruit GFX Library</code>库与<code>Adafruit SSD1306</code>库。</p><details class="hint-container details"><summary>打开Arduino管理库，进行安装</summary><p>可以打开Arduino管理库，找到<code>Adafruit GFX Library</code>库和<code>Adafruit SSD1306</code>库并进行安装。</p><figure><img src="'+d+`" alt="库管理器中的 Adafruit GFX Library" tabindex="0" loading="lazy"><figcaption>库管理器中的 Adafruit GFX Library</figcaption></figure></details><p>首先引用这些库，并定义：</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;SPI.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Wire.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Adafruit_GFX.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;Adafruit_SSD1306.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SCREEN_WIDTH</span> <span class="token expression"><span class="token number">128</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SCREEN_HEIGHT</span> <span class="token expression"><span class="token number">64</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">OLED_RESET</span>     <span class="token expression"><span class="token number">4</span></span></span>
Adafruit_SSD1306 <span class="token function">display</span><span class="token punctuation">(</span>SCREEN_WIDTH<span class="token punctuation">,</span> SCREEN_HEIGHT<span class="token punctuation">,</span> <span class="token operator">&amp;</span>Wire<span class="token punctuation">,</span> OLED_RESET<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>定义 <code>SCREEN_WIDTH</code>(OLED显示宽度)，以像素为单位。</li><li>定义 <code>SCREEN_HEIGHT</code>(OLED显示高度)，以像素为单位。</li><li>初始化了一个SSD1306型号的显示器，使该显示器具<code>SCREEN_WIDTH</code>和<code>SCREEN_HEIGHT</code>指定的宽度和高度。</li></ul><p>接着，在<code>setup()</code>函数中，添加如下代码：</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Serial<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token number">9600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>display<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span>SSD1306_SWITCHCAPVCC<span class="token punctuation">,</span> <span class="token number">0x3C</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Serial<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;SSD1306 allocation failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  display<span class="token punctuation">.</span><span class="token function">clearDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">ShowText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>初始化串口为<code>9600</code>波特率用于输出日志。</li><li>使用<code>display.begin</code>初始化屏幕设备，如果初始化失败，打印<code>SSD1306 allocation failed</code>，并阻塞代码。</li><li>使用<code>display.clearDisplay</code>清空屏幕信息。</li><li>调用<code>ShowText</code>函数，显示数据（函数见下方）。</li></ul><p>接着声明<code>ShowText</code>函数，用于打印数据：</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">ShowText</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//清空屏幕信息</span>
  display<span class="token punctuation">.</span><span class="token function">clearDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//设置文本字体大小为2</span>
  display<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//设置屏幕颜色为白色</span>
  display<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span>SSD1306_WHITE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//设置打印的起始坐标10,16</span>
  display<span class="token punctuation">.</span><span class="token function">setCursor</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//设置显示的文本信息</span>
  display<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">F</span><span class="token punctuation">(</span><span class="token string">&quot;happy day&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//将屏幕缓冲区数据刷到屏幕上，显示出来</span>
  display<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后加上<code>loop</code>函数，由于只是演示，所以这里我们用空函数实现：</p><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="输出结果" tabindex="-1"><a class="header-anchor" href="#输出结果" aria-hidden="true">#</a> 输出结果</h2><p>屏幕显示效果：</p><figure><img src="`+u+'" alt="效果图" tabindex="0" loading="lazy"><figcaption>效果图</figcaption></figure>',19);function y(g,S){const a=e("RouterLink");return p(),c("div",null,[k,v,m,h,n("p",null,[s("按"),o(a,{to:"/tutorial-advanced/Air001_start.html"},{default:i(()=>[s("☁️ Air001开发板入门")]),_:1}),s("，将Air001和DAPLink调试器使用排针排母连接。")]),b])}const x=t(r,[["render",y],["__file","SSD1306.html.vue"]]);export{x as default};
